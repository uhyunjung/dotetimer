#include <string>
#include <vector>

using namespace std;

string solution(string new_id) {
    string answer = "";

    //1단계
    for (int i = 0; i < new_id.length(); i++)
    {
        if ((new_id[i] >= 'A') && (new_id[i] <= 'Z')) // 대문자+32=소문자
        {
            new_id[i] += 32;
        }
    }

    //2단계
    for (int i = 0; i < new_id.length(); i++)
    {
        if (((new_id[i] >= 'a') && (new_id[i] <= 'z')) || ((new_id[i] >= '0') && (new_id[i] <= '9')) || (new_id[i] == '-') || (new_id[i] == '_') || (new_id[i] == '.'))
        {
            answer += new_id[i];
        }
    }

    //3단계
    for (int i = 0; i < answer.length(); i++)
    {
        if (answer[i] == '.')
        {
            for (int j = i; j <answer.length(); j++)
            {
                if (answer[j] == '.')
                {
                    if (j==answer.length()-1) // 조심
                    {
                        answer.erase(i, j);
                        break;
                    }
                    continue;
                }
                else
                {
                    answer.erase(i, j-i-1);
                    break;
                }
            }
        }
    }
    
    //4단계
    if ((answer.length()>0)&&(answer[answer.length() - 1] == '.')) // 조심
    {
        //answer.erase(answer.length()-1);
        if (answer.length() == 1) answer.erase(0,1);
        else { answer = answer.substr(0, answer.length() - 2);}
    }
    if (answer[0] == '.')
    {
         answer.erase(0,1);
    }
    
    //5단계
    if (answer.length() == 0)
    {
        answer += 'a'; // answer[i]='a'(X)
    }

    //6단계
    if (answer.length() >= 16)
    {
        answer = answer.substr(0,15);
        if (answer[14] == '.') answer.erase(14);
    }

    //7단계
    if (answer.length() <= 2)
    {
        for(int i=answer.length(); i<3; i++)
        {
            answer += answer[answer.length() - 1];
        }
    }

    return answer;
}
