#include <iostream>
#include <limits.h>
#include <memory.h>
#include <vector>
#include <queue>

using namespace std;

int main()
{
	ios_base::sync_with_stdio(0);
	cin.tie(0), cout.tie(0);

	int dice[6] = { 0, 0, 0, 0, 0, 0 };
	int page[4] = { 2, 3, 1, 4 }; // 동서북남
	int dx[4] = { 1, -1, 0, 0 };
	int dy[4] = { 0, 0, -1, 1 };

	int N, M, x, y, K, temp, top = 0;
	cin >> N >> M >> y >> x >> K;

	vector<vector<int>> m(N, vector<int>(M, 0));

	for (int i = 0; i < N; i++)
	{
		for (int j = 0; j < M; j++)
		{
			cin >> m[i][j];
		}
	}

	for (int i = 0; i < K; i++)
	{
		cin >> temp;
		temp -= 1;
		
		x += dx[temp];
		y += dy[temp];

		if ((x < 0) || (y < 0) || (x > M - 1) || (y > N - 1))
		{
			x -= dx[temp];
			y -= dy[temp];
			continue;
		}

		int before_top = top;
		if (temp % 2 == 0)
		{
			top = page[temp + 1]; // 새 윗면
			page[temp + 1] = (5 - before_top);
		}
		else
		{
			top = page[temp - 1]; // 새 윗면
			page[temp - 1] = (5 - before_top);
		}
		page[temp] = before_top;

		if (m[y][x] == 0) m[y][x] = dice[5 - top]; // if문 순서 확인
		else
		{
			dice[5 - top] = m[y][x];  // 바닥면
			m[y][x] = 0;
		}

		cout << dice[top] << "\n";
	}
}
